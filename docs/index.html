<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>What the Package Does (one line, title case) â€¢ readnet</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="jquery.sticky-kit.min.js"></script><script src="pkgdown.js"></script><!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">readnet</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    

    
    
<div class="contents">
<!-- README.md is generated from README.Rmd. Please edit that file -->
<div id="readnet" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#readnet" class="anchor"></a>readnet</h1></div>
<p>The goal of readnet is to provide tools for preprocessing network data (a companion to igraph, statnet, netdiffuseR, etc.)</p>
<p>Some of the features:</p>
<ul>
<li><p>Automatically handle coding for nodes, time and groups.</p></li>
<li>
<p>If either <code>group.id</code> or <code>time</code> are specified, the function makes recursive calls, returning nested edgelists with the following structure:</p>
<pre><code>object
--- group1:
  --- edgelist in time1
  --- ...
  --- edgelist in time n
...
--- group n:
  --- edgelist in time1
  --- ...
  --- edgelist in time n</code></pre>
</li>
<li><p>Includes functions to coerce the resulting edgelists into igraph objects and viceversa.</p></li>
</ul>
<p>This project is on development and not published on CRAN yet.</p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>You can get <code>readnet</code> using devtools:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">devtools<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/devtools/topics/install_github">install_github</a></span>(<span class="st">"USCCANA/readnet"</span>)</code></pre></div>
</div>
<div id="example" class="section level2">
<h2 class="hasAnchor">
<a href="#example" class="anchor"></a>Example</h2>
</div>
<div id="survey-to-edgelist" class="section level2">
<h2 class="hasAnchor">
<a href="#survey-to-edgelist" class="anchor"></a>Survey to Edgelist</h2>
<p>This is a basic example which shows you how to solve a common problem. Suppose that you have a dataset that looks something like this:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dat
<span class="co">#&gt;   ego alter1 alter2 time</span>
<span class="co">#&gt; 1   a      b   &lt;NA&gt;    0</span>
<span class="co">#&gt; 2   b   &lt;NA&gt;   &lt;NA&gt;    0</span>
<span class="co">#&gt; 3   c   &lt;NA&gt;   &lt;NA&gt;    0</span>
<span class="co">#&gt; 4   a      b      c    1</span>
<span class="co">#&gt; 5   b      a   &lt;NA&gt;    1</span>
<span class="co">#&gt; 6   c   &lt;NA&gt;   &lt;NA&gt;    1</span></code></pre></div>
<p>This is, a survey with network nominations, and in this case, including a time variable. We can use the function <code>survey_to_edgelist</code> to process this data</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(readnet)
(ans &lt;-<span class="st"> </span><span class="kw"><a href="reference/survey_to_edgelist.html">survey_to_edgelist</a></span>(dat, <span class="st">"ego"</span>, <span class="kw">c</span>(<span class="st">"alter1"</span>, <span class="st">"alter2"</span>), <span class="dt">time =</span> <span class="st">"time"</span>))
<span class="co">#&gt; $`0`</span>
<span class="co">#&gt; $edgelist</span>
<span class="co">#&gt;      ego alter</span>
<span class="co">#&gt; [1,]   1     2</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $labels</span>
<span class="co">#&gt; [1] "a" "b" "c"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $data</span>
<span class="co">#&gt;   ego alter1 alter2 time</span>
<span class="co">#&gt; 1   a      b   &lt;NA&gt;    0</span>
<span class="co">#&gt; 2   b   &lt;NA&gt;   &lt;NA&gt;    0</span>
<span class="co">#&gt; 3   c   &lt;NA&gt;   &lt;NA&gt;    0</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $graph.attrs</span>
<span class="co">#&gt; NULL</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; attr(,"class")</span>
<span class="co">#&gt; [1] "rn_edgelist"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $`1`</span>
<span class="co">#&gt; $edgelist</span>
<span class="co">#&gt;      ego alter</span>
<span class="co">#&gt; [1,]   1     2</span>
<span class="co">#&gt; [2,]   2     1</span>
<span class="co">#&gt; [3,]   1     3</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $labels</span>
<span class="co">#&gt; [1] "a" "b" "c"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $data</span>
<span class="co">#&gt;   ego alter1 alter2 time</span>
<span class="co">#&gt; 4   a      b      c    1</span>
<span class="co">#&gt; 5   b      a   &lt;NA&gt;    1</span>
<span class="co">#&gt; 6   c   &lt;NA&gt;   &lt;NA&gt;    1</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $graph.attrs</span>
<span class="co">#&gt; NULL</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; attr(,"class")</span>
<span class="co">#&gt; [1] "rn_edgelist"</span></code></pre></div>
<p>The previous returned a list with elements of class <code>rn_edgelist</code>. Each element contains an edgelist, a vector of labels, and a dataframe with data. We can use the function <code>as_igraph</code> to turn this into an igraph object</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="reference/as_igraph.html">as_igraph</a></span>(ans)
<span class="co">#&gt; $`0`</span>
<span class="co">#&gt; IGRAPH 99d4723 DN-- 3 1 -- </span>
<span class="co">#&gt; + attr: name (v/c), ego (v/c), alter1 (v/c), alter2 (v/c), time</span>
<span class="co">#&gt; | (v/c)</span>
<span class="co">#&gt; + edge from 99d4723 (vertex names):</span>
<span class="co">#&gt; [1] a-&gt;b</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $`1`</span>
<span class="co">#&gt; IGRAPH 1b45466 DN-- 3 3 -- </span>
<span class="co">#&gt; + attr: name (v/c), ego (v/c), alter1 (v/c), alter2 (v/c), time</span>
<span class="co">#&gt; | (v/c)</span>
<span class="co">#&gt; + edges from 1b45466 (vertex names):</span>
<span class="co">#&gt; [1] a-&gt;b b-&gt;a a-&gt;c</span></code></pre></div>
<p>and as a <code>rn_edgelist</code> back</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="reference/as_rn_edgelist.html">as_rn_edgelist</a></span>(<span class="kw"><a href="reference/as_igraph.html">as_igraph</a></span>(ans))
<span class="co">#&gt; $`0`</span>
<span class="co">#&gt; $edgelist</span>
<span class="co">#&gt;      ego alter</span>
<span class="co">#&gt; [1,]   1     2</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $labels</span>
<span class="co">#&gt; [1] "a" "b" "c"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $data</span>
<span class="co">#&gt;   name ego alter1 alter2 time</span>
<span class="co">#&gt; a    a   a      b   &lt;NA&gt;    0</span>
<span class="co">#&gt; b    b   b   &lt;NA&gt;   &lt;NA&gt;    0</span>
<span class="co">#&gt; c    c   c   &lt;NA&gt;   &lt;NA&gt;    0</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $graph.attrs</span>
<span class="co">#&gt; named list()</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; attr(,"class")</span>
<span class="co">#&gt; [1] "rn_edgelist"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $`1`</span>
<span class="co">#&gt; $edgelist</span>
<span class="co">#&gt;      ego alter</span>
<span class="co">#&gt; [1,]   1     2</span>
<span class="co">#&gt; [2,]   2     1</span>
<span class="co">#&gt; [3,]   1     3</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $labels</span>
<span class="co">#&gt; [1] "a" "b" "c"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $data</span>
<span class="co">#&gt;   name ego alter1 alter2 time</span>
<span class="co">#&gt; a    a   a      b      c    1</span>
<span class="co">#&gt; b    b   b      a   &lt;NA&gt;    1</span>
<span class="co">#&gt; c    c   c   &lt;NA&gt;   &lt;NA&gt;    1</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $graph.attrs</span>
<span class="co">#&gt; named list()</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; attr(,"class")</span>
<span class="co">#&gt; [1] "rn_edgelist"</span></code></pre></div>
</div>
<div id="setting-up-data-for-siena-or-alike" class="section level2">
<h2 class="hasAnchor">
<a href="#setting-up-data-for-siena-or-alike" class="anchor"></a>Setting up data for Siena (or alike :))</h2>
<p>Here is an example that I built for <a href="http://profiles.sc-ctsi.org/kayla.delahaye/">Prof.Â Kayla de la Haye</a>. The idea here is that we have an edgelist with (finite) timestamps, a dataset with node attributes, and a list of ids that we would like to include in the data. The final output looks like lists of adjacency matrices of <span class="math inline">\(n\times n\)</span> (so we coded the edgelist as 1 through <code>n</code>) and <code>data.frame</code> of the attributes matching the positions of nodes in the edgelist (you may be able to do something similar with igraph, but the key difference here is that this function allows you to include time and returns the attribute dataset sorted accordignly):</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(readnet)
<span class="kw">library</span>(dplyr)

edgelist &lt;-<span class="st"> </span>readxl<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/readxl/topics/read_excel">read_excel</a></span>(<span class="st">"playground/kayla/GROW_Edgelist clean for George.xlsx"</span>)
dat      &lt;-<span class="st"> </span>readr<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/readr/topics/read_delim">read_tsv</a></span>(<span class="st">"playground/kayla/GROW Attribute Data for George.csv"</span>)
ids2work &lt;-<span class="st"> </span>readxl<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/readxl/topics/read_excel">read_excel</a></span>(<span class="st">"playground/kayla/GROW_Edgelist clean for George.xlsx"</span>, <span class="st">"NetMembersN400"</span>)


<span class="co"># Catched an error:</span>
<span class="co"># Error: Missing ids in `data`. There are 610 observations in `data` and 613</span>
<span class="co"># identified ids. The observations that are missing in `data` are: '812398',</span>
<span class="co"># '812660', '831086'.</span>

<span class="co"># The same error shows up when I run it filtering the data:</span>
<span class="co">#</span>
<span class="co">#  Error: Missing ids in `data`. There are 394 observations in `data` and 397</span>
<span class="co"># identified ids. The observations that are missing in `data` are: '812398',</span>
<span class="co"># '812660', '831086'. So</span>
<span class="co">#</span>
<span class="co"># So I'll just drop it!</span>

dids &lt;-<span class="st"> </span><span class="kw">unique</span>(dat<span class="op">$</span>study_id)
edgelist &lt;-<span class="st"> </span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(edgelist, (Sender <span class="op">%in%</span><span class="st"> </span>dids) <span class="op">&amp;</span><span class="st"> </span>(Receiver <span class="op">%in%</span><span class="st"> </span>dids))

ans &lt;-<span class="st"> </span><span class="kw"><a href="reference/edgelist_to_adjmat_w_attributes.html">edgelist_to_adjmat_w_attributes</a></span>(
  <span class="dt">edgelist         =</span> edgelist,
  <span class="dt">data             =</span> dat,
  <span class="dt">data.idvar       =</span> <span class="st">"study_id"</span>,
  <span class="dt">edgelist.timevar =</span> <span class="st">"wave"</span>,
  <span class="dt">ids.to.keep      =</span> ids2work<span class="op">$</span>study_id
  )</code></pre></div>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2 class="hasAnchor">
<a href="#sidebar" class="anchor"></a>License</h2>
<p><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE.html">LICENSE</a></p>
<h2>Developers</h2>
<ul class="list-unstyled">
<li>George Vega Yon <br><small class="roles"> Author, maintainer </small> </li>
</ul>
</div>

</div>


      <footer><div class="copyright">
  <p>Developed by George Vega Yon.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
